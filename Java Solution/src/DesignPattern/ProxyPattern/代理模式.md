# 代理模式

## Intent
控制对其他对象的访问

## Class Diagram

![img](https://github.com/CyC2018/CS-Notes/raw/master/notes/pics/9b679ff5-94c6-48a7-b9b7-2ea868e828ed.png)

代理🈶️四类：

- 远程代理（Remote Proxy）：控制对远程对象（不同地址空间）的访问。它负责将请求和参数进行编码，并向不同地址空间中的对象发送已经编码的请求。
- 虚拟代理（Virtual Proxy）：根据需要创建开销很大的对象，他可以缓存尸体的附加信息，以便延迟对它的访问。例如，在网站加载一个很大图片的时候，不能马上完成，可以用虚拟代理缓存图片的大小信息，然后生成一张临时图片代理原始图片。
- 保护代理（Protection Proxy）：按权限控制对象的访问，它负责检查调用者是否具有实现一个请求所必需的权限。
- 智能代理（Smart Proxy）：取代了简单的指针，他在访问对象时执行一些附加操作：记录对象的引用次数；当第一次引用一个对象时，将它装入内存；在访问一个实际对象之前，检查是否已经锁定了它，以确保其他对象不能改变它。

## 主要解决

在直接访问对象时带来的问题，比如说：要访问的对象在远程的机器上。在面向对象系统中，有些对象由于某些原因（比图对象创建开销很大，或者某些操作需要安全控制，或者需要进程外的访问），直接访问会给使用者或者系统结构带来很多麻烦，我们可以在访问此对象时加上一个对此对象的访问层。

## 何时使用

现在访问一个类时做一些控制

## 优点

1. 职责清晰
2. 高扩展性
3. 智能化

## 缺点

1. 由于在客户端和真实主题之间增加了代理对象，因此有些类型的代理模式可能会造成请求的处理速度变慢
2. 实现代理模式需要额外的工作，有些代理模式的实现非常复杂

## 注意事项

- 和适配器模式的区别：
  - 适配器模式主要是改变所考虑对象的接口，而代理模式不能改变代理类的接口
- 和装饰器模式的区别：
  - 装饰器模式是为了增强功能，而代理模式是为了加以控制

## 1.  虚拟代理：图片延迟加载

模拟图片延迟加载的情况下使用与大小相等的临时内容去替换原始图片，知道图片加载完成才将图片显示出来。

## 2. [写代码，水军点赞 动态代理](https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484222&idx=1&sn=5191aca33f7b331adaef11c5e07df468&chksm=ebd7423fdca0cb29cdc59b4c79afcda9a44b9206806d2212a1b807c9f5879674934c37c250a1#rd)
